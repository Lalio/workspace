(function(b){b.event.special.textchange={setup:function(){b(this).data("lastValue","true"===this.contentEditable?b(this).html():b(this).val());b(this).bind("keyup.textchange",b.event.special.textchange.handler);b(this).bind("cut.textchange paste.textchange input.textchange",b.event.special.textchange.delayedHandler)},teardown:function(){b(this).unbind(".textchange")},handler:function(){b.event.special.textchange.triggerIfChanged(b(this))},delayedHandler:function(){var f=b(this);setTimeout(function(){b.event.special.textchange.triggerIfChanged(f)},25)},triggerIfChanged:function(b){var g="true"===b[0].contentEditable?b.html():b.val();g!==b.data("lastValue")&&(b.trigger("textchange",b.data("lastValue")),b.data("lastValue",g))}};b.event.special.hastext={setup:function(){b(this).bind("textchange",b.event.special.hastext.handler)},teardown:function(){b(this).unbind("textchange",b.event.special.hastext.handler)},handler:function(f,g){""===g&&g!==b(this).val()&&b(this).trigger("hastext")}};b.event.special.notext={setup:function(){b(this).bind("textchange",b.event.special.notext.handler)},teardown:function(){b(this).unbind("textchange",b.event.special.notext.handler)},handler:function(f,g){""===b(this).val()&&b(this).val()!==g&&b(this).trigger("notext")}}})(jQuery);!function(){var b=decodeURIComponent(window.location.search.split("\x3d")[1]);""==b&&(b="\u7ebf\u6027\u4ee3\u6570");var f=$(".school-name").attr("ucode")?$(".school-name").attr("ucode"):0,g=$(".college-name").attr("ccode")?$(".college-name").attr("ccode"):0,h="",k="",l=$(".sort-name").attr("order")?$(".sort-name").attr("order"):0,m=$(".price-name").attr("pay")?$(".price-name").attr("pay"):0,q=!0,e={pageNum:0,indexUrl:"//api.xzbbm.cn/?action\x3dSuperAPI",searchInit:function(){$(".search-bd").attr("value",b);e.searchKeyword(f,g,e.pageNum,10,b,l,"","",m)},searchKeyword:function(a,b,g,f,k,h,l,n,p){$.ajax({url:e.indexUrl+'\x26do\x3dSearchDocument\x26debug\x3don\x26msg\x3d{"ucode":'+a+',"ccode":'+b+',"from":'+g+',"limit":'+f+',"keyword":"'+k+'","order":'+h+',"uname":"'+l+'","cname":"'+n+'","pay":'+p+"}",type:"get",dataType:"jsonp",success:function(d){var c="",f="",p="";d=d.documentItemList;var h=d.length;if(0==h)0===g?($(".loading").hide(),$(".search-result").html("\u627e\u4e0d\u5230\u8be5\u8d44\u6599")):($(".loading").hide(),$(".load-over").show());else{if(0==a&&0==b&&""==l&&""==n)c='\u5b66\u957f\u5e2e\u4f60\u5728\x3cspan class\x3d"result-position"\x3e\u5168\u56fd\u9ad8\u6821\u4e2d\x3c/span\x3e\u627e\u5230\x3c!--\x3cspan class\x3d"result-num"\x3e11\x3c/span\x3e\u4efd--\x3e\u4e0e\x3cspan class\x3d"result-name"\x3e'+k+"\x3c/span\x3e\u76f8\u5173\u7684\u8d44\u6599";else{c+='\u5b66\u957f\u5e2e\u4f60\u5728\x3cspan class\x3d"result-position"\x3e';if(0!=a||""!=l)c+=$(".school-name").html();if(0!=b||""!=n)c+="  "+$(".college-name").html();c+='\x3c/span\x3e\u627e\u5230\x3c!--\x3cspan class\x3d"result-num"\x3e11\x3c/span\x3e\u4efd--\x3e\u4e0e\x3cspan class\x3d"result-name"\x3e'+k+"\x3c/span\x3e\u76f8\u5173\u7684\u8d44\u6599"}$(".search-result").html(c);$("#result-block,#result-list");for(c=0;c<h;c++)var m="img/detailpic_no.png",f=f+('\x3cli\x3e\x3cdiv class\x3d"thumbnail"\x3e\x3ca href\x3d"'+d[c].web_url+'" target\x3d"_blank" class\x3d"thumbnail-href"\x3e\x3cimg src\x3d"'+d[c].thumbnail+'" alt\x3d"" onerror\x3d"this.src\x3d\''+m+"'\"\x3e"),f=0==d[c].today_price?f+('\x3cspan class\x3d"pass-price free"\x3e'+d[c].total_page+"\u9875\x3c/span\x3e"):f+('\x3cspan class\x3d"pass-price non-free"\x3e'+d[c].total_page+"\u9875\x3c/span\x3e"),f=f+('\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"thumbnail-bd"\x3e\x3cdiv class\x3d"title-wrap"\x3e\x3ch2 class\x3d"passage-title"\x3e\x3ca href\x3d"'+d[c].web_url+'" title\x3d"'+d[c].file_name+'" target\x3d"_blank"\x3e'+d[c].file_name+'\x3c/a\x3e\x3c/h2\x3e\x3cspan class\x3d"passage-style '+d[c].file_extension+'"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"passage-source"\x3e\x3cp\x3e\u8d44\u6599\u6765\u6e90\uff1a\x3c/p\x3e\x3cp class\x3d"form-school"\x3e\x3cimg onerror\x3d"/images/sicons/0.png" src\x3d"/images/sicons/'+d[c].sicon_id+'.png" width\x3d"25px"\x3e\x26nbsp;\x26nbsp;'+d[c].uname+"   "+d[c].cname+'\x3c/p\x3e\x3cp class\x3d"parting-line"\x3e|\x3c/p\x3e\x3cp\x3e\u53d1\u5e03\u8005\uff1a\x3c/p\x3e\x3cp class\x3d"form-user"\x3e'+d[c].user_name+'\x3c/p\x3e\x3cp class\x3d"parting-line"\x3e|\x3c/p\x3e\x3cp\x3e\u4e0a\u4f20\u65e5\u671f\uff1a\x3c/p\x3e\x3cp class\x3d"form-date"\x3e'+d[c].FormatedFileTime+'\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"passage-info"\x3e\x3cp class\x3d"passage-intro"\x3e'+d[c].file_info+'\x3c/p\x3e\x3c/div\x3e\x3cul class\x3d"passage-detail"\x3e\x3cli\x3e\x3cspan class\x3d"view-ico"\x3e\x3c/span\x3e\x3cspan\x3e \u6d4f\u89c8 : \x3c/span\x3e\x3cspan class\x3d"view-num"\x3e'+d[c].file_views+'\x3c/span\x3e\x3c/li\x3e\x3cli\x3e\x3cspan class\x3d"download-ico"\x3e\x3c/span\x3e\x3cspan\x3e\u4e0b\u8f7d : \x3c/span\x3e\x3cspan class\x3d"view-num"\x3e'+d[c].file_downs+'\x3c/span\x3e\x3c/li\x3e\x3cli\x3e\x3cspan class\x3d"reputation-ico"\x3e\x3c/span\x3e\x3cspan\x3e \u597d\u8bc4\u7387 : \x3c/span\x3e\x3cspan class\x3d"star"\x3e'+e.transformstar(d[c].good_count)+"\x3c/span\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e");$(".loading").hide();$("#result-list").append(f);for(c=0;c<h;c++)p+='\x3cli\x3e\x3cdiv class\x3d"thumbnail"\x3e\x3ca class\x3d"thumbnail-a" href\x3d"'+d[c].web_url+'" target\x3d"_blank"\x3e\x3cimg src\x3d"'+d[c].thumbnail+'" alt\x3d"" onerror\x3d"this.src\x3d\''+m+"'\"\x3e",p=0==d[c].today_price?p+('\x3cspan class\x3d"pass-price free"\x3e'+d[c].total_page+"\u9875\x3c/span\x3e"):p+('\x3cspan class\x3d"pass-price non-free"\x3e'+d[c].total_page+"\u9875\x3c/span\x3e"),p+='\x3cdiv class\x3d"thumbnail-mask"\x3e\x3cp\x3e'+d[c].file_info+'\x3c/p\x3e\x3c/div\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"thumbnail-bd"\x3e\x3ch2 class\x3d"passage-title"\x3e\x3ca href\x3d"'+d[c].web_url+'" title\x3d"'+d[c].file_name+'" target\x3d"_blank"\x3e'+d[c].file_name+'\x3c/a\x3e\x3c/h2\x3e\x3cdiv class\x3d"passage-source"\x3e\x3cp class\x3d"form-school"\x3e\x3cimg onerror\x3d"/images/sicons/0.png" src\x3d"/images/sicons/'+d[c].sicon_id+'.png" width\x3d"25px"\x3e\x26nbsp;\x26nbsp;'+d[c].uname+"   "+d[c].cname+'\x3c/p\x3e\x3cp class\x3d"upload-date"\x3e\u53d1\u5e03\u65e5\u671f\uff1a\x3c/p\x3e\x3cp class\x3d"form-date"\x3e'+d[c].FormatedFileTime+'\x3c/p\x3e\x3cp class\x3d"passage-info"\x3e\u6d4f\u89c8 \x3cspan\x3e'+d[c].file_views+"\x3c/span\x3e / \u4e0b\u8f7d \x3cspan\x3e"+d[c].file_downs+"\x3c/span\x3e / \u8bc4\u8bba \x3cspan\x3e"+d[c].comment_count+'\x3c/span\x3e\x3c/p\x3e\x3cp class\x3d"reputation"\x3e\x3cspan\x3e \u597d\u8bc4\u7387 : \x3c/span\x3e\x3cspan class\x3d"star"\x3e'+e.transformstar(d[c].good_count)+'\x3c/span\x3e\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"uploader" style\x3d"display:none;"\x3e\x3cspan class\x3d"uploader-voice"\x3e\x3c/span\x3e\x3cspan class\x3d"uploader-img"\x3e\x3c/span\x3e\x3cspan class\x3d"uploader-name"\x3e'+d[c].user_name+"\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e";$("#result-block").append(p);q=!0;10>h&&($(".load-over").show(),$(".loading").hide())}},error:function(){}})},changeStyle:function(){$(".style-list").on("click",function(){$(this).hasClass("active")||($(this).addClass("active").siblings().removeClass("active"),$(".style-change").addClass("list-active").removeClass("block-active"),$(".result-block").hide(),$(".result-list").show())});$(".style-block").on("click",function(){$(this).hasClass("active")||($(this).addClass("active").siblings().removeClass("active"),$(".style-change").removeClass("list-active").addClass("block-active"),$(".result-list").hide(),$(".result-block").show())})},inputName:function(){var a,r=0,s=0,u=!1,t=!1;$(".search-name,.arrow").on("click",function(){a=$(this).parent().attr("data-flag");if("college"==a)if(t)$(".college-name").removeClass("college-name-not").addClass("college-name-allow");else return;$("."+a+"-auto").show();$(".input-mask").show();$("."+a+"-wrap .arrow").removeClass("arrow-down").addClass("arrow-up");$(".input-text").val("").focus();"school"!=a&&"college"!=a||$("#school-search-list,#college-search-list").html("");$(".school-auto .input-tips").show();$(".input-none").hide();"college"==a&&(0!=f?($(".college-input-wrap .ajax-loading").show(),$.ajax({url:e.indexUrl+'\x26do\x3dWebGetCollege\x26debug\x3don\x26msg\x3d{"ucode":'+f+',"cname":""}',type:"get",dataType:"jsonp",success:function(a){var b="",d=a.length;$("#college-search-list").html("");$(".college-input-wrap .ajax-loading").hide();if(0==d)$(".college-auto .input-none").show();else{$(".college-auto .input-none").hide();for(var c=0;c<d;c++)b+='\x3cli collegeid\x3d"'+a[c].college_id+'"\x3e'+a[c].college+"\x3c/li\x3e";$("#college-search-list").html(b)}},error:function(){}}),$(".college-auto .input-tips").hide()):$(".college-auto .input-tips").show())});$(".search-con").on("click",".choose-auto ul li",function(){var n=$(this).html();$("."+a+"-wrap .search-name ").html(n);$("."+a+"-auto").hide();$(".input-mask").hide();$(".load-over").hide();$("."+a+"-wrap .arrow").removeClass("arrow-up").addClass("arrow-down");var p=$("."+a+"-bwrap .close-search-name");n===$("."+a+"-wrap").attr("data-default")?p.hide():p.show();switch(a){case "sort":n=$(this).index();if(n===s)break;s=l=n;$(".loading").show();$("#result-list,#result-block").html("");e.pageNum=0;e.searchKeyword(f,g,e.pageNum,10,b,l,h,k,m);break;case "price":n=$(this).index();if(n===r)break;r=m=n;$(".loading").show();$("#result-list,#result-block").html("");e.pageNum=0;e.searchKeyword(f,g,e.pageNum,10,b,l,h,k,m);break;case "school":f=$(this).attr("universityid");$(".loading").show();$("#result-list,#result-block").html("");e.pageNum=0;t=!0;$(".college-name").removeClass("college-name-not").addClass("college-name-allow");$(".college-wrap .arrow").removeClass("arrow-not").addClass("arrow-down");e.searchKeyword(f,g,e.pageNum,10,b,l,h,k,m);break;case "college":g=$(this).attr("collegeid"),$(".loading").show(),$("#result-list,#result-block").html(""),e.pageNum=0,e.searchKeyword(f,g,e.pageNum,10,b,l,h,k,m)}});$(".search-con").on("focus",".input-text",function(){u=!0});$(".search-con").on("blur",".input-text",function(){u=!1});$(document).on("keyup",function(n){if(u&&13==(n?n:window.event).keyCode){if("school"===a)if(h=$.trim($(".school-input-wrap .input-text").val()),""!=h)$(".school-name").html(h),$(".school-bwrap .close-search-name").show(),$(".school-wrap .arrow").removeClass("arrow-up").addClass("arrow-down"),t=!0,$(".college-name").removeClass("college-name-not").addClass("college-name-allow"),$(".college-wrap .arrow").removeClass("arrow-not").addClass("arrow-down");else return;if("college"===a)if(k=$.trim($(".college-input-wrap .input-text").val()),""!=k)$(".college-name").html(k),$(".college-bwrap .close-search-name").show(),$(".college-wrap .arrow").removeClass("arrow-up").addClass("arrow-down");else return;$(".loading").show();$("#result-list,#result-block").html("");e.pageNum=0;$(".choose-auto").hide();$(".input-mask").hide();e.searchKeyword(f,g,e.pageNum,10,b,l,h,k,m)}});var q="",v="";$(".search-con .school-input").on("input propertychange",function(){$(".school-auto .input-tips").hide();$(".school-input-wrap .ajax-loading").show();q=$.trim($(this).val());""==q?($(".school-input-wrap .ajax-loading").hide(),$(".school-auto .input-none").show()):$.ajax({url:e.indexUrl+'\x26do\x3dWebGetUniversity\x26debug\x3don\x26msg\x3d{"uname":"'+q+'"}',type:"get",dataType:"jsonp",success:function(a){var b="",d=a.length;$("#school-search-list").html("");$(".school-input-wrap .ajax-loading").hide();if(0==d)$(".school-auto .input-none").show();else{$(".school-auto .input-none").hide();for(var c=0;c<d;c++)b+='\x3cli universityid\x3d"'+a[c].university_id+'"\x3e'+a[c].name+"\x3c/li\x3e";$("#school-search-list").html(b)}},error:function(){}})});$(".search-con .college-input").on("input propertychange",function(){$(".college-auto .input-tips").hide();$(".college-input-wrap .ajax-loading").show();v=$.trim($(this).val());""==v?$(".college-input-wrap .ajax-loading").hide():$.ajax({url:e.indexUrl+'\x26do\x3dWebGetCollege\x26debug\x3don\x26msg\x3d{"ucode":'+f+',"cname":"'+v+'"}',type:"get",dataType:"jsonp",success:function(a){var b="",d=a.length;$("#college-search-list").html("");$(".college-input-wrap .ajax-loading").hide();if(0==d)$(".college-auto .input-none").show();else{$(".college-auto .input-none").hide();for(var c=0;c<d;c++)b+='\x3cli collegeid\x3d"'+a[c].college_id+'"\x3e'+a[c].college+"\x3c/li\x3e";$("#college-search-list").html(b)}},error:function(){}})});$(".search-con").on("click",".close-search-name",function(){var a=$(this).next(),p=a.attr("data-default"),d=a.attr("data-flag");a.find(".search-name").html(p);$(this).hide();$(".load-over").hide();switch(d){case "sort":l=0;$(".loading").show();$("#result-list,#result-block").html("");e.pageNum=0;e.searchKeyword(f,g,e.pageNum,10,b,l,h,k,m);break;case "price":m=0;$(".loading").show();$("#result-list,#result-block").html("");e.pageNum=0;e.searchKeyword(f,g,e.pageNum,10,b,l,h,k,m);break;case "school":g=f=0;k=h="";t=!1;$(".college-name").removeClass("college-name-allow").addClass("college-name-not").html("\u5b66\u9662");$(".college-wrap .arrow").removeClass("arrow-down arrow-up").addClass("arrow-not");$(".college-bwrap .close-search-name").hide();$(".loading").show();$("#result-list,#result-block").html("");e.pageNum=0;e.searchKeyword(f,g,e.pageNum,10,b,l,h,k,m);break;case "college":g=0,k="",$(".loading").show(),$("#result-list,#result-block").html(""),e.pageNum=0,e.searchKeyword(f,g,e.pageNum,10,b,l,h,k,m)}});$(".input-mask").on("click",function(){$(this).hide();$(".choose-auto").hide();$("."+a+"-wrap .arrow").removeClass("arrow-up").addClass("arrow-down")})},transformDate:function(a){return(new Date(1E3*a)).toLocaleDateString()},transformstar:function(a){a=Number(a);return 0<a&&0.5>=a?'\x3ci class\x3d"half-star"\x3e\x3c/i\x3e':0.5<a&&1>=a?'\x3ci class\x3d"all-star"\x3e\x3c/i\x3e':1<a&&1.5>=a?'\x3ci class\x3d"all-star"\x3e\x3c/i\x3e\x3ci class\x3d"half-star"\x3e\x3c/i\x3e':1.5<a&&2>=a?'\x3ci class\x3d"all-star"\x3e\x3c/i\x3e\x3ci class\x3d"all-star"\x3e\x3c/i\x3e':2<a&&2.5>=a?'\x3ci class\x3d"all-star"\x3e\x3c/i\x3e\x3ci class\x3d"all-star"\x3e\x3c/i\x3e\x3ci class\x3d"half-star"\x3e\x3c/i\x3e':2.5<a&&3>=a?'\x3ci class\x3d"all-star"\x3e\x3c/i\x3e\x3ci class\x3d"all-star"\x3e\x3c/i\x3e\x3ci class\x3d"all-star"\x3e\x3c/i\x3e':3<a&&3.5>=a?'\x3ci class\x3d"all-star"\x3e\x3c/i\x3e\x3ci class\x3d"all-star"\x3e\x3c/i\x3e\x3ci class\x3d"all-star"\x3e\x3c/i\x3e\x3ci class\x3d"half-star"\x3e\x3c/i\x3e':3.5<a&&4>=a?'\x3ci class\x3d"all-star"\x3e\x3c/i\x3e\x3ci class\x3d"all-star"\x3e\x3c/i\x3e\x3ci class\x3d"all-star"\x3e\x3c/i\x3e\x3ci class\x3d"all-star"\x3e\x3c/i\x3e':4<a&&4.5>=a?'\x3ci class\x3d"all-star"\x3e\x3c/i\x3e\x3ci class\x3d"all-star"\x3e\x3c/i\x3e\x3ci class\x3d"all-star"\x3e\x3c/i\x3e\x3ci class\x3d"all-star"\x3e\x3c/i\x3e\x3ci class\x3d"half-star"\x3e\x3c/i\x3e':4.5<a&&5>=a?'\x3ci class\x3d"all-star"\x3e\x3c/i\x3e\x3ci class\x3d"all-star"\x3e\x3c/i\x3e\x3ci class\x3d"all-star"\x3e\x3c/i\x3e\x3ci class\x3d"all-star"\x3e\x3c/i\x3e\x3ci class\x3d"all-star"\x3e\x3c/i\x3e':""},scrollLoadData:function(){$(window).scroll(function(){var a=$(document).height(),r=$(window).scrollTop(),s=$(window).height();a-r<=s&&q&&($(".loading").show(),q=!1,e.pageNum++,e.searchKeyword(f,g,10*e.pageNum,10,b,l,h,k,m))})},backToTop:function(){var a=$(".gotop");$(window).on("scroll",function(){180<$(window).scrollTop()?a.addClass("gotop-show"):a.removeClass("gotop-show")});a.on("click",function(){$("html,body").animate({scrollTop:"0px"},800)})},emailTimer:null,sendEmail:function(){$("#sendemail-form-submit").on("click",function(){clearInterval(e.emailTimer);var a=$.trim($("#sendemail").val());""===a?$("#sendmail-error-tips").html("\u90ae\u7bb1\u4e0d\u80fd\u4e3a\u7a7a\uff01"):/([a-z0-9]*[-_.]?[a-z0-9]+)*@([a-z0-9]*[-_]?[a-z0-9]+)+[.][a-z]{2,3}([.][a-z]{2})?/i.test(a)?($.cookie("findback_email",a),e.sendEmailAjax(a)):$("#sendmail-error-tips").html("\u90ae\u7bb1\u683c\u5f0f\u9519\u8bef\uff01")})},sendEmailAjax:function(a){$(".submit-loading").show();var b=!1;$.ajax({url:e.indexUrl+'\x26do\x3dWebChangePassword\x26debug\x3don\x26msg\x3d{"temp_ip":"http://xzbbm.cn/index.html","email":"'+a+'"}',type:"get",dataType:"jsonp",success:function(f){$(".submit-loading").hide();$(".J_maskLayer,#sendemail-popbox").hide();wilson.popupBox("none",{boxSelector:".sendemail-success-popbox"});$(".success-email").html(a);$(".countdown").off("click",function(){e.sendEmailAjax(a)});b=!1;$("#resend").addClass("nonsend");var g=60;e.emailTimer=setInterval(function(){0==g&&(clearInterval(e.emailTimer),b=!0,$("#resend").removeClass("nonsend"),$("#resend").on("click",function(){b&&(e.sendEmailAjax(a),b=!1)}));$(".countdown").html(g--)},1E3)}})},init:function(){this.searchInit();this.changeStyle();this.inputName();this.scrollLoadData();this.backToTop();this.sendEmail()}};"undefined"!==typeof e&&(window.search=e);e.init()}();
//@ sourceMappingURL=search.min.js.map